import{c as O}from"./createLucideIcon-5EykR_L4.js";import{r as i}from"./index-Dfg4keF3.js";import{u as E}from"./utils-9HXHfogb.js";import{f as A}from"./index-DQnRCyND.js";const S=O("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function T(n,e){return i.useReducer((t,r)=>e[t][r]??t,n)}var v=n=>{const{present:e,children:t}=n,r=P(e),a=typeof t=="function"?t({present:r.isPresent}):i.Children.only(t),u=E(r.ref,R(a));return typeof t=="function"||r.isPresent?i.cloneElement(a,{ref:u}):null};v.displayName="Presence";function P(n){const[e,t]=i.useState(),r=i.useRef(null),a=i.useRef(n),u=i.useRef("none"),p=n?"mounted":"unmounted",[N,s]=T(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const o=l(r.current);u.current=N==="mounted"?o:"none"},[N]),A(()=>{const o=r.current,m=a.current;if(m!==n){const f=u.current,c=l(o);n?s("MOUNT"):c==="none"||o?.display==="none"?s("UNMOUNT"):s(m&&f!==c?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,s]),A(()=>{if(e){let o;const m=e.ownerDocument.defaultView??window,d=c=>{const g=l(r.current).includes(c.animationName);if(c.target===e&&g&&(s("ANIMATION_END"),!a.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",o=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=c=>{c.target===e&&(u.current=l(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{m.clearTimeout(o),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else s("ANIMATION_END")},[e,s]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:i.useCallback(o=>{r.current=o?getComputedStyle(o):null,t(o)},[])}}function l(n){return n?.animationName||"none"}function R(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{v as P,S as X};
